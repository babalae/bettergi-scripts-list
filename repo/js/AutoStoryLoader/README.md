# 自动剧情加载器 - 使用说明
## 项目宗旨
自动剧情加载器是专为委托开发者设计的**脚本调试与编辑工具**，旨在提升委托开发效率，简化测试流程。

> **重要声明**：
> 1. 本项目**不会将任何非委托任务流程脚本上传至脚本仓库**
> 2. **禁止任何人用于商业用途**，禁止在任何场合展示或宣传自动任务效果
> 3. **不提倡**上传任何任务流程脚本到公开平台
> 4. 工具仅提供技术框架，**不包含任何自动游戏剧情内容**
> 5. 请勿在任何官方平台（米游社、B站、微博等）讨论本工具
> 6. 严禁在官方直播、动态或社区提及本工具相关内容

**免责声明**：
1. **使用风险**：
   - 本脚本为开源学习项目，仅为游戏委托开发提供技术支持，禁止用于商业用途或违反游戏条款的行为。
2. **责任限制**：
   - 本脚本按“现状”提供，不承诺兼容性、安全性或功能完整性。
   - 用户应自行承担使用风险，并严格遵守《原神》用户协议。因使用本脚本导致的损失，开发者概不负责。

使用即表示您已阅读并同意上述条款。
---
## 使用方法及配置
1. 将任务脚本解压至 `process/` 目录
2. 将脚本添加至调度器
3. 右键点击脚本以修改 JS 自定义配置
4. 在设置中选择“刷新剧情列表”
5. 工具将扫描所有可用剧情脚本
6. 从更新后的列表中选择要执行的剧情
---
### 社区公约
> “我们理解大家对工具的热情，但脚本属于敏感领域。请务必：
> - 不在任何官方平台讨论技术细节
> - 不在直播、视频中展示工具效果
> - 不与官方产生任何形式冲突
> 
> 保持低调才能让工具持续可用！”

### 开发者社区
如需自动剧情脚本，请加入开发者社群：
- **开发者群**：[开发者群号]（加群获取）
- **审核群**：1057644730
- **小提示**：
  - 群内还有提瓦特部分锄(tan)地(suo)资源（定期更新）
  - 要求：会按按钮

> **再次强调**：
> - **禁止任何人用于商业用途**，禁止在任何场合展示或宣传自动任务效果
> - **不要将任何非委托任务流程脚本上传至脚本仓库**

**让我们共同维护良好的社区环境！让大家都 BetterGI 用！**
---
## 全新框架开发指南
### 用法速览
- **放置位置**：仍使用原来的 `process/.../.../process.json`
- **文件内容**：可以直接写多行文本（无需 JSON）。冒号可用中文或英文
- **元数据（可选）**：开头写
  - `作者：xxx`
  - `描述：xxx`
- **任务块头**：以“任务描述字符串：”起一块，例如 `与纳西达对话：`
  - 匹配规则：OCR 获得的任务描述将做清洗（去特殊字符、大小写不敏感），用相似度≥0.90 的最佳匹配来选择块。相同描述的多个块按出现顺序执行（会记执行计数，下次匹配到会执行下一块）
  - 默认块（未匹配/超时13秒时执行）：块头可写 `默认：`、`无任务描述字符串：`、`default：`、`超时：` 等之一
- **指令行**：指令名与参数之间至少一个空格；`#` 与 `//` 为注释
  - `地图追踪 相对路径.json`
  - `键鼠脚本 相对路径.json`
  - `对话 NPC名`（简单格式下会自动开启 AutoSkip，交互→对话后等待回主界面）
  - `交互 目标名`（Alt+点击，不等待对话）
  - `等待返回主界面`
  - `追踪图标 图标类型`（Bigmap/Question/默认Task）
  - `按键 键值`（例如 F，在只有一个选项的时候可以用来充当交互，最好写两个以防万一）
  - `等待 毫秒`（默认5000毫秒）
  - `任务完成`（立即退出整个流程）
  - `暂停 提示`（脚本会自己暂停自己，交由用户处理无法处理的事，提示非必填，在日志窗口输出）
  - `战斗`（在原地开启一次战斗，直接写进地图追踪文件里也可）
  - `自动拾取 开启/关闭` (开启关闭自动拾取,默认开启)
- **兼容旧格式**：
  - `F 纳西达` 等价 `对话 纳西达`
  - `xxx.json` 等价 `地图追踪 xxx.json`
### 示例新结构（可断点续跑，带重试机制）
```
作者：星野
描述：示例流程

与特纳对话：
父亲能做的事-晨曦酒庄-1.json
F 特纳

找吉丽安娜配药:
父亲能做的事-晨曦酒庄-2.json
F 吉丽安娜

向特纳回报:
父亲能做的事-晨曦酒庄-3.json
F 特纳
任务完成

默认：
父亲能做的事-晨曦酒庄-1.json
自动拾取 开启
F 特纳
```
- 重复任务描述的块按上下顺序依次执行；第一次匹配到执行第一个，再次匹配到执行第二个，以此类推
- 未检测到任务描述时，会每秒检测一次，13 秒仍未匹配则执行默认块（若存在）
### 示例旧结构（可直接作为 `process.json` 文本内容）
```
皮皮潘1接取对话.json
F
皮皮潘2暂停手动.json
暂停
皮皮潘3对话.json
F
皮皮潘4暂停手动.json
暂停
皮皮潘5对话.json
F
皮皮潘6暂停手动.json
键鼠脚本 键鼠脚本.json//地图追踪和键鼠脚本可以一起使用啦
暂停
皮皮潘7对话2分钟.json
F
```
### 其它说明
- “对话”指令会尝试优先 Alt+点击包含 NPC 名称的文本区域触发交互，然后执行 AutoSkip 自动跳过剧情并等待返回主界面
- “交互”指令只做 Alt+点击，不等待对话
- “追踪图标”支持 Bigmap/Question/默认 Task 图标
- 原 JSON 数组流程保持兼容
> 完成后把 `process.json` 及所有子流程文件打包发给审核即可。祝制作顺利！