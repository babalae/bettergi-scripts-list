# 自动好感pro狗粮脚本

**重要免责声明：**

1. **使用风险：**
   1. 本脚本为开源学习项目，禁止用于商业用途或违反游戏条款的行为。
   2. 滥用可能导致游戏账号封禁，开发者不承担任何直接或间接责任。

2. **责任限制：**
   1. 本脚本按“现状”提供，不承诺兼容性、安全性或功能完整性。
   2. 因使用本脚本导致的账号、数据、设备损失，开发者概不负责。

3. **禁止条款：**
   1. 严禁逆向工程、恶意篡改或用于外挂等非法用途。
   2. 如游戏运营商提出要求，开发者保留随时停止维护的权利。

使用即表示您已阅读并同意上述条款。

---

## 零、使用方法及配置

1. 将脚本添加至调度器。
2. 右键点击脚本以修改 JS 自定义配置。
-  **卡时间模式**
   - “盗宝团/愚人众/鳄鱼兽肉好感”：均为做好感任务获取收益，等昨天的调查点CD结束。
   - “干等卡时间”：原地发呆，等昨天的调查点CD结束。
   - “不卡时间AB交替运行”：立刻富A富B交替运行，不需要等24小时CD，富A富B路线之间要等12小时CD。
-  **是否启用激活路线**：启用后将花费一段时间先四处传送激活狗粮调查点，可以用于缩短间隔（提高A线比例，从而提高总收益）/降低因为后续路线卡死导致运行时间波动引起第二天狗粮点位未刷新/启用后当日运行完激活路线后跑狗粮过程中如果卡死可以当日直接重跑，不会导致少跑a线。
-  **使用老abe路线**：勾选后将替换为使用老abe的路线，收益会下降。
-  **好感任务最低运行次数**：填写0~50次（上限），前10次收益最高。捡完狗粮会回来打完未完成的次数。
-  **账户名称**：**单账号无需更改。** 多账号使用时建多个配置组，一个账号使用一个配置组，填入游戏账号名称（自己取名），就可以按各自名称记录运行信息。
-  **好感队名称**：改成自己刷好感的队伍名字，该队伍也将用于清理狗粮路线上的小怪，**需要自行匹配战斗策略。**
-  **狗粮队名称**：改成自己捡狗粮的队伍名字。建议使用迪西雅或e启动奶妈作为行走位，如果需要配置生存位，建议与行走位相同。建议携带：迪西雅（耐肘王，提供移速加成），万叶（路线中有配置万叶吸取狗粮，可提高拾取率）
-  **最短时间间隔**：比昨天延后（默认）5分钟开始捡狗粮。如果启用了激活路线，可以降低至1-2分钟。
-  **卡时间时间段**：在此时间段内，会每天延后1次时间间隔来跑富A路线。若时间超出则立刻运行富B路线，第二天则会回到。
3. 一定要正确设置好感队和狗粮队的名称。
4. 根据好感队角色配置，调整战斗超时设置。
   
## 注意事项

1. 对于运行时间和路线的记录依赖本地文件的读写，直接更新js会导致丢失记录影响收益，建议更新js前先备份js文件夹中的records文件夹，更新后覆盖。
2. 路线和abe略有差异，第一次运行时收益下降是正常现象，第二天即可恢复正常，或者第一次在晚于前一天运行abe的时间开始运行本js也可解决。
3. 狗粮路线出现卡死、跳崖等问题请找 @汐 ，盗宝团好感部分出现问题请找 @秋云。
4. 默认配置下将在4：05-4：45卡时间，如果你常用的启动时间不在这个时间段，请在js自定义配置中调节，建议总时长不超过40分钟，否则会在盗宝团等好感全部运行结束都不能等到时间的话会开始干等。
5. 务必在js自定义配置中填写合适的狗粮队伍与好感队伍名称，运行过程中会自动切换，要求正确配置生存位，行走位，战斗策略（用于好感战斗）等。同时要确保在配置组中启用“允许在JsScript中使用”和“覆盖JS中的自动战斗配置”。
6. 还在测试中可能存在bug，bug反馈和建议可以在频道中提问，或联系相关作者。
7. 本脚本不支持断点续跑，如果你需要相关功能，说明你不适合使用本脚本，请移步abe。
8. 清怪和激活时不会拾取，属于正常现象。

## 联系方式

1. 如有任何问题或建议，请在bgi频道中反映。


## 一、调查点类型收益

| 类型 | 等效1星圣遗物 | 平均经验值 | 平均摩拉 | 计算公式                           |
| ---- | ------------- | ---------- | -------- | ---------------------------------- |
| 穷点 | 1.35个        | 567 EXP    | 0        | 65%出1星(420EXP)+35%出2星(840EXP)  |
| 富点 | 1.5个         | 630 EXP    | 200      | 50%出1个1星(420EXP)/2个1星(840EXP) |


## 二、调查点机制与刷新CD

### **误区**  
❌ *错误认知*：很多人误以为调查点的 **24小时CD** 是从 **按F调查** 时开始计算的。  

✅ **实际机制**：
-  **游戏程序只会加载以玩家为圆心，固定半径内地图资源，调查点也在此时被激活，产生发光特效（CD倒计时未结束不会被激活）即数据出现在内存中时CD倒计时自动开始。**    
-  **每天4点刷新可互动的调查点上限100个，调查满上限后，进入未加载区域，调查点将不再被激活。** 在最后范围内，已经激活的调查点不会消失，可以继续调查。  
- **与是否调查/拾取无关**！即使不调查或下线，CD仍会继续倒计时。 例：今天你10点路过某区域，24小时CD的调查点开始发光随后离开，15点再回来拾取调查点。明天此调查点会在10点CD倒计时结束，可以再次拾取。  
- **单日多次加载无效**：若在CD未结束前重复加载调查点（无论拾取与否），都不会重置计时。  


## 三、路线配置与收益

### 1. 主要路线参数

| 路线名称 | 调查点 | 富点数量 | 穷点数量 | 总经验值 | 总摩拉 | 运行时间 | 98上限点 富%  |
| -------- | ------ | -------- | -------- | -------- | ------ | -------- | ------------- |
| 富A路线  | 162    | 105      | 57       | 98,469   | 22,600 | 68分钟   | 98/98 (100%)  |
| 富B路线  | 135    | 105       | 30       | 83,160   | 21,000 | 50分钟   | 98/98 (100%) |
| ABE A线  | 137    | 33       | 104      | 77,742   | 6,600  | 41分钟   | 27/98 (27.5%) |
| ABE B线  | 138    | 34       | 104      | 77,868   | 6,800  | 43分钟   | 33/98 (33.6%) |

`富B富点%提升中`
### 2. 经验值计算公式

`总经验 = (富点数×1.5 + 穷点数×1.35) × 420`

路径详情:     
https://www.kdocs.cn/wo/sl/v13uXscL   

## 四、路径结构

 **-1激活**：提前加载触发CD倒计时，后续可自由安排时间拾取，避免“现用现触发”的等待问题，无需担心CD同步问题     
 **00准备**：部分优质富点有小怪镇守，清除以后才按路径顺序拾取，此时不拾取调查点!少数点位需要提前转变为发光点，不拾取调查点!   
 **01普通**：至多98个调查点   
 **02收尾**：附近区域超出100以外的调查点   
 **03额外**：不受满上限影响消失，又叫超限点   


## 五、周循环方案对比

### 1. 富6A1B方案

- **执行方式**：
  - 连续6天跑富A路线（富A与富A间隔≥24H+5min）
  - 第7天跑富B路线（与富A间隔≥12H+5min）
- **周总收益**：
  - 经验：6×98,469 + 83,160 = 673,974 EXP
  - 摩拉：6×22,600 + 21,000 = 156,600
- **周总耗时**：6×68 + 50 = 458分钟（约7.63小时）

### 2. 富1A1B方案

- **执行方式**：
  - 每天交替跑富A和富B路线（间隔≥12H+5min）
- **周总收益**：
  - 经验：3.5×(98,469+83,160) = 635,701 EXP
  - 摩拉：3.5×(22,600+21,000) = 152,600
- **周总耗时**：3.5×(68+50) = 413分钟（约6.88小时）

### 3. ABE 1A1B方案（基准）

- **执行方式**：
  - 每天交替跑ABE A线和B线（点位不重叠，无间隔要求）
- **周总收益**：
  - 经验：3.5×(77,742+77,868) = 544,677 EXP
  - 摩拉：3.5×(6,600+6,800) = 46,900
- **周总耗时**：3.5×(41+43) = 294分钟（约4.9小时）

### 4. 收益对比表

| 指标   | 富6A1B  | 富1A1B  | ABE1A1B | 富6A1B增长       | 富1A1B增长      |
| ------ | ------- | ------- | ------- | ---------------- | --------------- |
| 周经验 | 673,974 | 635,701 | 544,677 | +129,297 (23.7%) | +91,024 (16.7%) |
| 周摩拉 | 156,600 | 152,600 | 46,900  | +109,700 (233.9%)| +105,700 (225.4%)|
| 周耗时 | 7.63h   | 6.88h   | 4.9h    | +2.73h           | +1.98h          |


## 六、队伍配置
- **根据自己CPU配置选择合适的移速**：电脑性能较差以至于收益远不如及格线时，降低队伍移速（使用较矮小的体型，不使用双风，四风原典，迪西雅天赋等）。
- **行走位：优先迪希雅;或芙宁娜等 E启动奶**
- **钟剑迪希雅**：耐肘王/白天6-18点移速+10%(路径内置调时间到白天,全程100%吃满天赋)
- **万叶：建议携带，路径内配有E吸狗粮策略(不带不影响运行)**
- **双风BUFF**：移速+10% 体力消耗-15%


## 七、选择建议

1. **追求极限收益**：富nA1B方案（周经验13万+24%，周耗时多2.73小时）。
2. **想多收益又不想卡时间**：富1A1B方案（周经验9.6万+17.7%，周耗时多1.98小时）。
3. **希望方便随时启动就能用**：选择老abe路线。


## 八、JS文件结构

1. **main.js**：负责核心业务逻辑，包括好感任务和狗粮路线的执行。
2. **manifest.json**：脚本配置文件，记录基本信息和设置。
3. **settings.json**：用户配置文件，用于设置好感队和狗粮队的名称、任务间隔等参数。
4. **records**：运行记录文件，用于存储运行信息。


## 九、功能特点

1. 完成好感任务。
2. 执行狗粮路线，自动计算时间并进行路线选择。
3. 可选择在狗粮路线结束后继续完成剩余的好感任务。


## 更新日志
### 1.6.0（2025.07.16）
1.新增摧毁换取摩拉的选项和沿途分解选项
### 1.5.9（2025.07.15）
1.微调(激活大炮第二炮掉出影响/204卡木条/216避开穷点/224避开书本/302微调/405微调/407微调/428微调/605微调)
### 1.5.7（2025.07.13）
1.微调(217珉林酒窖掉水里/421祝祭亭上层点位/426智障厅爬墙/508研究院西北误触)
### 1.5.6（2025.07.12）
1.新增[琴]吸狗粮
2.优化[踏鞴砂开炮-2炮]靠近方向
### 1.5.5（2025.07.10）
1.修复一些连锁意外
2.优化新版/旧版识图导致坐标偏移
### 1.5.4（2025.07.8）
1.优化一些较小概率发生的意外
### 1.5.3（2025.07.7）
1.上传了新富B路线实现上限点全富(98/98)，要求bgi版本47.1 alpha4 使用方式：删除旧B路线内4个文件夹，放入新的4个文件夹(00准备/01普通/02收尾/03额外)
1.优化一些点位角度
### 1.5.2（2025.07.4）
1.优化一些点位角度
### 1.5.1（2025.07.3）
1.带[芙宁娜]会强制切为奶状态，在某些含怪路线会开奶保命
2.优化一些点位角度
### 1.5.0（2025.07.1）
1.不知道，摩尼欧老师重云了，忘记更新了什么
### 1.4.9（2025.06.29）
1. 优化了关于四星狗粮的处理
2. 添加"调查点提早触发倒计时机制"
### 1.4.8（2025.06.28）
1. 替换掉富A 508号路径
### 1.4.7（2025.06.26）
1. 路径内置"时瞬06:00"，带[迪希雅]天赋全程100%吃满
### 1.4.6（2025.06.26）
1. 对账户名内置默认项，避免因为default不生效产生报错
### 1.4.4（2025.06.24）
1. 优化几处坐标精确度.
### 1.4.4（2025.06.23）
1. 优化部分点位万叶E的方向，避免位移方向误吃调查点
### 1.4.3（2025.06.23）
1. 修复了添加老abe路线导致的程序无法正常运行
2. 优化了经验识别逻辑，运行前无狗粮时也能正确处理剩余经验
3. 添加了对于账户名等的默认配置和校验，减少用户乱填导致的出错可能
### 1.4.1（2025.06.22）
1. 维修部分路径卡死点位
2. 目标点已设置好强制行走位拾取，队伍可以带治疗位
### 1.4.0（2025.06.22）
1. 添加了使用老abe路线的选项
### 1.3.5（2025.06.22）
1. 修复了对于四星狗粮数量的错误处理造成的统计结果中收益为负的问题
### 1.3.4（2025.06.21）
1. 优化了换队伍的逻辑
### 1.3.3（2025.06.21）
1. 尝试修复好感战斗超时时程序异常终止的问题
### 1.23.4（2025.06.16）
1. 增加了对于敌人类型的处理，避免报错
### 1.23.1（2025.06.14）
1. 日志中加入路径名的信息
### 1.23.0（2025.06.13）
1. settings中默认好感队伍为“好感”，默认狗粮队伍为“狗粮”，防止默认配置下出现问题
### 1.21（2025.06.09）
1. 修改盗宝团触发路线，减少摩拉丢失
2. 优化ocr模块，现在识别失败时会尝试点击中心位置
3. 优化流程，现在只有当用户勾选了不分解四星时才会两次快速选择，可以节约约5秒
4. 修改自定义配置，现在可以输入最低好感运行次数，默认10次，用来保证能够完成最低的好感任务次数。
### 1.2（2025.06.08）
1. 加入狗粮分解和经验统计功能。
2. 优化逻辑，已经运行完成狗粮路线时仍然可以直接执行本js来完成好感
### 1.1（2025.06.05）
1. 路线优化。
2. 加入了不同类型的卡时间方式。
### 1.0（2025.06.05）
1. 初始版本发布，支持自动好感任务和狗粮路线执行。
