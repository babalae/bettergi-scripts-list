# 自动精英锄地规划

## 项目简介
该脚本支持根据用户配置生成路径组文件、运行路径组或执行路径文件。用户可以通过配置文件设置所需怪物数量、筛选条件（如是否包含传奇路线、水免路线、次数盾路线、高危路线）以及最低秒均值。脚本还支持禁用自动拾取功能和启用路线CD检测。脚本会根据这些条件筛选出符合条件的路线，并生成路径组文件或直接运行路径文件，直到满足所需怪物数量。

## 功能特点
- **生成路径组文件**：根据用户配置筛选路线，并生成包含选中路线名称的路径组文件。
- **运行路径组**：直接运行生成的路径组文件，执行地图追踪任务。
- **执行路径文件**：直接执行指定的路径文件，运行地图追踪任务。
- **灵活的筛选条件**：支持多种筛选条件，帮助用户找到最适合的路线。
- **禁用自动拾取**：用户可以选择禁用自动拾取功能，以避免不必要的物品拾取。
- **路线CD检测**：用户可以选择启用路线CD检测，避免重复执行未刷新的路径。

### 配置项说明

| 配置项名称               | 类型         | 默认值                     | 说明                                                                 |
|--------------------------|--------------|----------------------------|----------------------------------------------------------------------|
| `operationType`          | `select`     | `生成路径组文件`           | 操作类型，可选值：`生成路径组文件`、`执行路径组文件1`、`执行路径组文件2`、`执行路径组文件3`、`输出地图追踪文件` |
| `excludeTagsForPathGroup1` | `input-text` | 空字符串                   | 路径组1要排除的标签，可选值：`传奇`、`水免`、`次数盾`、`高危`，用逗号分隔 |
| `selectTagsForPathGroup2`  | `input-text` | 空字符串                   | 路径组2要选择的标签，可选值：`传奇`、`水免`、`次数盾`、`高危`，用逗号分隔 |
| `selectTagsForPathGroup3`  | `input-text` | 空字符串                   | 路径组3要选择的标签，可选值：`传奇`、`水免`、`次数盾`、`高危`，用逗号分隔 |
| `disableAutoPickup`       | `checkbox`   | `false`                    | 是否禁用自动拾取功能。如果启用，脚本运行时不会自动拾取物品。          |
| `enableRouteCdCheck`      | `checkbox`   | `false`                    | 是否启用路线CD检测。如果启用，脚本会检查路径组文件中的时间戳，避免执行未刷新的路径。 |
| `requiredMonsterCount`    | `input-text` | `405`                      | 目标怪物数量，必须为0以上的整数                                      |
| `minSecPerMonster`        | `input-text` | `0.1`                      | 最低秒均值，秒均 = 摩拉 / 时间                                       |

## 使用方法
1. **安装 BetterGI**：确保你已经安装了最新版本的 BetterGI，并且版本号不低于 `0.44.0`。
2. **下载脚本**：在脚本仓库订阅文件夹。
3. **配置脚本**：根据你的需求更改 `settings.json` 中的配置项。
4. **选择操作模式**：
   - **生成路径组文件**：脚本将根据配置筛选路线，并生成包含选中路线名称的路径组文件。
   - **执行路径组文件1/2/3**：脚本将直接运行指定的路径组文件，执行地图追踪任务。
   - **输出地图追踪文件**：脚本将选中的地图追踪文件复制到 `js` 目录下的 `pathingout` 文件夹中，方便用户直接复制使用。
5. **查看输出**：根据配置的操作模式，脚本将生成路径组文件、运行路径组或执行路径文件。

## 计算各路线实际锄地效率并更新路线

每个人锄地使用的队伍以及队伍中角色的练度各有不同，脚本中预置的各路线效率数据可能并不适合每一个人。因此增加了一个python脚本`计算实际效率并更新路线.py`：当你已经有了各条路线的运行记录后，可以基于你使用的队伍，计算你实际在每个路线上的锄地效率，并重新生成一条更量身定制的路线。

使用此功能需要你安装了Python，并且有关于如何运行Python脚本的丁点知识（不懂的可以找个AI问）。

1. 打开配置组界面的`更多功能`——`日志分析`功能，根据你的需要选择要分析的日志天数。然后选中`异常情况统计`、`统计锄地摩拉怪物数`，并在输入框中填写米游社Cookie（点击问号`?`可以看到如何获取Cookie的说明）。然后点击`确定`。

   选择日志天数时，所选时间范围内最好是使用的同一支队伍执行的锄地任务。

2. 待日志分析完成后，在新弹出的`日志分析`窗口中点击鼠标右键，选择`另存为`，将报告保存在一个你稍后能找到的地方。
3. 运行`计算实际效率并更新路线.py`，会提示你选择上一步另存为的文件。选择后脚本会立即开始运行，并在脚本目录下生成一个`dynamic_index.txt`文件。这个就是你在各条路线的实际锄地效率。
4. 在Better GI中修改脚本操作模式，重新生成路径组文件。会基于上一步生成的txt文件中的摩拉获取效率重新生成路线。
5. 将脚本操作模式改为`执行路径组文件`。这样就是适合你队伍的锄地路线了。

## 注意事项
- 如果选择“执行路径组文件”，请确保路径组文件存在，并且路径文件中的每个地图追踪文件都存在。
- 如果生成的路径组文件或执行路径文件不符合预期，可以检查 `settings.json` 配置是否正确。
- 如果启用“禁用自动拾取”功能，脚本运行时不会自动拾取物品，请根据需要手动拾取。
- 如果启用“路线CD检测”，将会跳过未刷新的路线，如果你希望刷新所有路线，你可以重新生成路径组文件

## 联系作者
如果有任何问题或建议，请联系作者：
- **作者**：mno
