# 自动购买每天&3天&每周刷新商品 - 使用说明

## 📝 功能说明

这个脚本可以自动购买原神游戏中各个商品的商品，支持三种刷新周期：
- **每天刷新商品**：每天凌晨4点刷新
- **3天刷新商品**：每3天刷新一次
- **每周刷新商品**：每周刷新，可指定购买日
- **记录系统**：避免重复购买，只购买刷新后的商品
- **标签系统**：支持按标签批量禁用商人

## ⚡ 快速开始

### 1. 准备工作 & 注意事项
1. **游戏分辨率**：1920×1080 解析度**
2. **游戏时间**：脚本会自动调整白天/晚上时间
3. **背包空间**：确保有足够空间购买商品
4. **摩拉**：确保有足够的摩拉
5. **记录系统**：购买记录保存在 `record/账号名/` 目录下
6. **多人模式**：脚本只能在单人模式下运行
7. **刷新时间**：基于游戏服务器时间（GMT+8），每天4点刷新


### 2. 首次使用
1. 打开脚本设置界面
2. 输入要购买的商品
3. 设置每周商品购买模式
4. 设置要禁用的商人或标签
5. 保存设置
6. 在主界面运行脚本



## ⚙️ 设置说明
1. **账号名**：填写账号名，用于区分不同账号的购买记录
2. **要购买的商品**：输入商品名称，用空格分隔（支援的商人与商品请查看下方表格）
   -  建议直接复制商品名称贴上输入栏
   -  输入标签后会购买具有该标签的商人的所有商品
   ```
   示例：盐 胡椒 螃蟹 圣水 松茸 沉玉仙茗 蟹黄 稀少商品
   ```
3. **每周商品购买方式**：
   - 0：跟随游戏系统周期自动判断
   - 1-7：指定周几购买（1=周一，7=周日）
   - **适用范围**：包含所有每周刷新的商品
     - 周一刷新商品
     - 周四刷新商品
   - **每月1号刷新商品**：不受此设置影响，刷新即购买
4. **禁用标签功能**：可以输入要禁用的标签（空格分隔），如：
   ```
   示例：黑心商人 挪德卡莱 卡琵莉亚
   ```
   禁用后，脚本会跳过这些商人或带有指定标签的商人，不会前往购买。
   
   可以使用国家/地区（如"蒙德"、"璃月"）或其他标签(如商人信息总览中的标签)
5. **是否跳过调整时间动画**：开启后会啟用时瞬跳过调整时间动画
6. **无视购买记录强制购买**：开启后会忽略购买记录，重新购买所有商品
7. **调试模式**：开启后显示详细执行日志

### 购买记录系统说明
脚本会自动记录购买时间，避免重复购买：
1. **每天刷新商品** - 每天凌晨4点刷新
2. **3天刷新商品** - 每3天刷新一次
3. **每周刷新商品** - 每周固定週一购买
   - 周一刷新商品：按设置决定是否购买
   - 周四刷新商品（狗粮商人）：同样受设置控制
4. **每月1号刷新商品** - 每月1号凌晨4点刷新


购买记录保存在：`record/你填的账号名/records.json`
- 下次执行时只购买已刷新商品
- 可通过"无视购买记录强制购买"选项重置


## 📋 商人与商品支持表

### 如何查看支持的商品？
- **查看本文件下方表格**：包含所有支持的商人与商品

| 所在地 | 商人名 | 每天刷新商品 | 3天刷新商品 | 每周刷新商品 | 标签 |
|--------|--------|-------------|------------|-------------|------|
| 蒙德-风起地 | 克罗丽丝 | - | 金鱼草、薄荷、钩钩果、落落莓、慕风蘑菇 | - | 移动 |
| 蒙德-清泉镇 | 神奇的霍普金斯 | 圣水 | - | - | 稀少商品 |
| 蒙德-清泉镇 | 杜拉夫 | 兽肉、禽肉、鸟蛋 | - | - |  |
| 蒙德-蒙德城 | 布兰琪 | 盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦 | - | - |  |
| 蒙德-蒙德城 | 莎拉 | - | - | 面粉、奶油、熏禽肉、黄油、火腿、糖、蟹黄、果酱、奶酪、培根、香肠 |  |
| 蒙德-蒙德城 | 芙萝拉 | - | 甜甜花、风车菊、塞西莉亚花、小灯草、嘟嘟莲 | - |  |
| 蒙德-蒙德城 | 石榴 | - | - | 冒险家金杯、冒险家尾羽、冒险家头带、冒险家之花、冒险家怀表 | 狗粮商人 |
| 蒙德-蒙德城-天使的馈赠 | 查尔斯 | 冰钩钩果汁、树莓薄荷饮、苹果酿、气泡酸莓汁 | - | - | 独立地图、稀少商品 |
| 璃月-璃月港 | 阿山婆 | 霄灯 | - | - |  |
| 璃月-璃月港 | 石头 | 铁块、白铁块、夜泊石 | - | - |  |
| 璃月-璃月港 | 东升 | 盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦、稻米、虾仁、豆腐、杏仁 | - | - |  |
| 璃月-璃月港 | 卯师父 | 鱼肉、螃蟹 | 竹笋、莲蓬、松茸、蘑菇、胡萝卜、白萝卜、绝云椒椒 | 面粉、糖、香肠、火腿 |  |
| 璃月-璃月港 | 老孙 | 鱼肉、螃蟹、虾仁 | - | - |  |
| 璃月-璃月港 | 老高 | 鱼肉、鱼肉2 | - | - |  |
| 璃月-璃月港 | 长顺 | 土豆 | 石珀、电气水晶 | 糖、奶酪 |  |
| 璃月-璃月港 | 琳琅 | - | -  | 游医的药壶、游医的枭羽、游医的方巾、游医的银莲、游医的怀钟 | 狗粮商人 |
| 璃月-璃月港 | 张顺 | - | - | 幸运儿之杯、幸运儿鹰羽、幸运儿银冠、幸运儿绿花、幸运儿沙漏 | 狗粮商人 |
| 璃月-璃月港 | 博来 | - | 苹果、日落果、鱼肉、星螺 | - |  |
| 璃月-璃月港 | 阿桂 | - | 清心、琉璃袋、马尾、莲蓬、冰雾花花朵、烈焰花花蕊 | - |  |
| 璃月-琼玑野 | 朱老板 | 大碗茶 | - | - | 稀少商品 |
| 璃月-望舒客栈 | 菲尔戈黛特 | - | 松茸、霓裳花、琉璃袋 | 黄油、香肠 |  |
| 璃月-石门 | 老周叔 | 大碗茶 | - | - | 稀少商品 |
| 璃月-轻策庄 | 小白 | - | 豆腐、杏仁、霓裳花 | 琉璃百合(每月刷新) |  |
| 璃月-轻策庄 | 凯叔 | 大碗茶 | - | - | 稀少商品 |
| 璃月-遗珑埠 | 丰泰 | 稻米、豆腐 | 清水玉、石珀、夜泊石、琉璃袋、霓裳花、绝云椒椒、沉玉仙茗 | 蟹黄 |  |
| 璃月-遗珑埠 | 连芳 | - | 沉玉仙茗 | - |  |
| 稻妻-离岛 | 小畑 | 螃蟹、鱼肉、虾仁 | 海灵芝 | - |  |
| 稻妻-离岛 | 秋月 | 铁块、白铁块、电气水晶 | - | - |  |
| 稻妻-离岛 | 山城健太 | 鳗肉 | 珊瑚真珠 | 幸运儿之杯、幸运儿鹰羽、幸运儿绿花、幸运儿银冠、幸运儿沙漏 | 狗粮商人 |
| 稻妻-离岛 | 卡琵莉亚 | - | 蒲公英籽 | - |  |
| 稻妻-白狐之野 | 若紫 | - | - | 「四方八方之网」 |  |
| 稻妻-稻妻城 | 葵 | 盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦、稻米、虾仁、豆腐 | 鸣草 | - |  |
| 稻妻-稻妻城 | 志村勘兵卫 | 鱼肉、螃蟹 | 海草、堇瓜、白萝卜 | 香肠、培根、面粉、糖 |  |
| 稻妻-稻妻城 | 智树 | 团子牛奶 | - | - | 稀少商品 |
| 稻妻-稻妻城 | 木南杏奈 | 特制风味烤蘑菇披萨 | - | - | 稀少商品 |
| 稻妻-海祇岛 | 清子 | - | - | 牛奶、番茄、土豆、小麦、豆腐 |  |
| 须弥-化城郭 | 阿什帕齐 | 兽肉、禽肉 | 鸟蛋、树王圣体菇 | 香辛料 |  |
| 须弥-须弥城 | 朱特 | - | 香辛果、帕蒂沙兰 | 香辛料 |  |
| 须弥-须弥城 | 阿夫辛 | - | - | 冒险家金杯、冒险家尾羽、冒险家头带、冒险家之花、冒险家怀表 | 狗粮商人 |
| 须弥-须弥城 | 珀姆 | 鱼肉、螃蟹、虾仁 | 海草 | - |  |
| 须弥-须弥城 | 哈马维 | 盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦、稻米、豆腐、虾仁 | 香辛果、墩墩桃 | - |  |
| 须弥-须弥城-兰巴德酒馆 | 兰巴德 | 鱼肉、螃蟹、秃秃豆 | 星蕈 | 面粉、香肠、培根、香辛料、糖 | 独立地图 |
| 须弥-须弥城-普斯帕咖啡馆 | 恩忒卡 | 咖啡豆 | - | - | 独立地图 |
| 须弥-奥摩斯港 | 拉玛 | 盐、胡椒 | - | 香辛料、糖、黄油、奶酪 |  |
| 须弥-奥摩斯港 | 布特罗斯 | 鱼肉、螃蟹、虾仁 | - | - |  |
| 须弥-奥摩斯港 | 秋蔚 | - | 水晶块、石珀、夜泊石、霓裳花 | - |  |
| 须弥-奥摩斯港 | 巴巴克 | - | 慕风蘑菇、蒲公英籽、琉璃袋、清心、鸣草、珊瑚真珠 | - |  |
| 须弥-桓那兰那(梦境) | 兰玛尼 | - | 日落果、香辛果、墩墩桃、树王圣体菇、劫波莲 | - | 桓那兰那(梦境) |
| 须弥-阿如村 | 阿扎莱 | 鱼肉、兽肉、秃秃豆 | 星蕈、枣椰、墩墩桃 | 面粉、香辛料、糖 | 黑心商人 |
| 枫丹-枫丹廷 | 布希柯 | 枫达、盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦、秃秃豆、杏仁、发酵果实汁 | 蘑菇、茉洁草 | - |  |
| 枫丹-枫丹廷 | 阿鲁埃 | 枫达、咖啡豆 | - | - |  |
| 枫丹-枫丹廷 | 路易 | 枫达 | - | - |  |
| 枫丹-枫丹廷 | 欧仁妮 | 番茄、卷心菜 | 泡泡桔、茉洁草、日落果、墩墩桃、枣椰、落落莓、虹彩蔷薇 | - |  |
| 枫丹-枫丹廷-德波大饭店 | 桑格内蒂 | 枫达 | - | 面粉、奶油、黄油、火腿、糖、蟹黄、果酱、奶酪、培根、香肠 | 独立地图 |
| 枫丹-枫丹廷-灰河 | 克洛莎 | - | - | 幸运儿之杯、幸运儿鹰羽、幸运儿银冠、幸运儿绿花、幸运儿沙漏 | 狗粮商人 |
| 枫丹-白淞镇 | 安特曼 | 鱼肉、螃蟹、虾仁 | 海露花、汐藻、苍晶螺 | - |  |
| 枫丹-锈舵酒馆 | 皮托 | 牛奶 | - | 培根、火腿、香肠、奶酪 | 黑心商人 |
| 纳塔-圣火竞技场 | 钦特利 | 土豆 | 烛伞蘑菇、颗粒果、苦种、烬芯花、青蜜莓、肉龙掌 | - |  |
| 纳塔-圣火竞技场 | 艾库瓦 | - | - | 幸运儿之杯、幸运儿鹰羽、幸运儿银冠、幸运儿绿花、幸运儿沙漏 | 狗粮商人 |
| 纳塔-圣火竞技场 | 布纳马 | 盐、胡椒、小麦、洋葱、牛奶、番茄、卷心菜、土豆、秃秃豆 | 蘑菇 | - |  |
| 纳塔-圣火竞技场 | 夏安卡 | - | - | 面粉、奶油、黄油、火腿、糖、蟹黄、果酱、奶酪、培根、香肠 |  |
| 纳塔-坚岩隘谷 | 伊蜜 | - | 铁块、白铁块、水晶块、萃凝晶、澄晶实 | - |  |
| 纳塔-悠悠度假村 | 穆托莉娜 | - | 灼灼彩菊、肉龙掌、云岩裂叶、浪沫羽鳃 | - |  |
| 挪德卡莱-那夏镇 | 采若 | 盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦、黑麦 | - | - |  |
| 挪德卡莱-那夏镇 | 丽切娅 | - | 甜甜花、宿影花、霜盏花 | - |  |
| 挪德卡莱-那夏镇 | 卡嘉 | - | - | 面粉、奶油、熏禽肉、黄油、火腿、糖、蟹黄、果酱、奶酪、培根、香肠 |  |
| 挪德卡莱-那夏镇 | 雷科 | - | - | 幸运儿之杯、幸运儿鹰羽、幸运儿银冠、幸运儿绿花、幸运儿沙漏 | 狗粮商人 |
| 挪德卡莱-皮拉米达城 | 科菲策 | 牛奶、咖啡豆 | 微光角菌、琉鳞石 | - | 黑心商人 |

### **以下为有效标签**
- **国家**：蒙德、璃月、稻妻、须弥、枫丹、纳塔、挪德卡莱
- **地区**：风起地、清泉镇、蒙德城、璃月港、离岛、稻妻城、海祇岛等
- **小地图**：天使的馈赠、兰巴德酒馆、德波大饭店、灰河、锈舵酒馆等
- **商人**：克罗丽丝、神奇的霍普金斯、杜拉夫等（所有商人名）
- **移动**：指商人会移动，有机会购买失败
- **稀少商品**：指稀少商品
- **独立地图**：指需要进入独立空间的特殊地图，这些地图部份路径无法使用地图追踪功能
- **黑心商人**：指没有折扣的商人，价格较贵的商人
- **狗粮商人**：指每周四刷新商品的狗粮商人

### **欢迎补充商人与商品与标签**

## 🔧 添加新商品

### 1. 添加商品图片
1. 截图商品图标，尺寸建议 90×90 像素
2. 保存为 PNG 格式，放在 `assets/images/` 目录下
3. 文件名建议使用中文，如：`新商品.png`

### 2. 添加到商人
在 `assets/npcs.json` 中找到对应商人，添加到相应的商品列表中：

```json
"_1d_foods": ["新商品"]  // 每天刷新商品
"_3d_foods": ["新商品"]  // 3天刷新商品
"_7d_foods": ["新商品"]  // 每周刷新商品
```

### 3. 更新商人与商品支持表
将新商品添加到本文件的商人与商品支持表中，方便其他用户查看。

## 🆕 添加新商人

### 1. 录制路径
1. 使用路径录制工具录制前往商人的路径
2. 保存为 JSON 文件，命名格式：`地区-位置-商人名.json`
3. 放在 `assets/path/` 目录下

### 2. 添加商人数据
在 `assets/data/npcs.json` 中添加：

```json
"new_npc": {
  "name": "新商人名",
  "enable": true,
  "page": 2,              // 商店总页数
  "time": "any",          // any/day/night
  "path": "assets/path/地区-位置-新商人名.json",
  "_1d_foods": ["商品1", "商品2"],    // 每天刷新
  "_3d_foods": ["商品3"],             // 3天刷新
  "_7d_foods": ["商品4"],              // 每周刷新
  "tags": ["地区", "黑心商人"]    // 商人标签
}
```

### 3. 参数说明
- `page`: 商店的总页数
- `time`: 商人出现时间
  - `any`: 全天出现
  - `day`: 
  - `night`:
- `path`: 路径文件位置

### 4. 更新商人与商品支持表
将新商人添加到本文件的商人与商品支持表中。

## ❓ 常见问题

### Q: 脚本不购买任何商品？
A: 检查：
1. 是否在设置中填写了要购买的商品
2. 商品名称是否正确（参考上方表格）
3. 游戏分辨率是否为 1920×1080
4. 角色是否在单人模式
5. 是否有购买记录导致商品未刷新

### Q: 如何知道支持哪些商品名称？
A: 查看：
1. 本文件中的"商人与商品支持表"
2. `assets/data/foods.json` 文件中的 `name` 字段
3. 运行脚本时的日志输出会显示"用户启用了以下商品"

### Q: 为什么跳过某些商人？
A: 可能原因：
1. 该商人没有你要购买的商品
2. 商人在禁用列表中
3. 购买记录显示商品还未到刷新时间

### Q: 如何重置购买记录？
A: 有几种方法：
1. 启用"无视购买记录强制购买"选项
2. 删除 `record/你的账号名/records.json` 文件
3. 等待商品自然刷新

### Q: 每天什么时候刷新？
A: 游戏内的刷新时间是**每天凌晨4点**。脚本会考虑这个时间点：
- 如果当前时间在4点前，视为前一天
- 购买记录基于4点刷新时间计算

## 🤝 贡献指南

欢迎提交新的商人和商品配置！

1. **提交新的商人**：包含路径文件和商人数据
2. **提交新的商品**：包含图片和商品数据
3. **更新文档**：记得更新本README中的商人信息表
4. **标签补充**：欢迎为现有商人添加合适的标签
5. **问题反馈**：提供详细的重现步骤和日志

---

> 注意：本脚本仅供学习与研究使用，请遵守游戏使用条款。
``