# 自动购买每天&3天&每周刷新食材 - 使用说明

## 📝 功能说明

这个脚本可以自动购买原神游戏中各个商人的食材，支持三种刷新周期：
- **每天刷新食材**：每天凌晨4点刷新
- **3天刷新食材**：每3天刷新一次
- **每周刷新食材**：每周刷新，可指定购买日
- **记录系统**：避免重复购买，只购买刷新后的商品
- **标签系统**：支持按标签批量禁用商人

## ⚡ 快速开始

### 1. 准备工作 & 注意事项
1. **游戏分辨率**：1920×1080 解析度**
2. **游戏时间**：脚本会自动调整白天/晚上时间
3. **背包空间**：确保有足够空间购买商品
4. **摩拉**：确保有足够的摩拉
5. **记录系统**：购买记录保存在 `record/账号名/` 目录下
6. **多人模式**：脚本只能在单人模式下运行
7. **刷新时间**：基于游戏服务器时间（GMT+8），每天4点刷新


### 2. 首次使用
1. 打开脚本设置界面
2. 输入要购买的食材
3. 设置每周食材购买模式
4. 设置要禁用的商人或标签
5. 保存设置
6. 在主界面运行脚本



## ⚙️ 设置说明
1. **账号名**：填写账号名，用于区分不同账号的购买记录
2. **要购买的商品**：输入商品名称，用空格分隔（支援的商人与商品请查看下方表格）
   -  建议直接复制商品名称贴上输入栏
   ```
   示例：盐 胡椒 螃蟹 圣水 松茸 沉玉仙茗 蟹黄
   ```
3. **每周商品购买方式**：
   - 0：跟随游戏系统周期自动判断
   - 1-7：指定周几购买（1=周一，7=周日）
4. **要禁用的商人**：不想购买的商人，用空格分隔
   ```
   示例：阿扎莱 皮托
   ```
5. **禁用标签功能**：可以输入要禁用的标签（空格分隔），如：
   ```
   示例：黑心商人 挪德卡莱
   ```
   禁用后，脚本会跳过这些商人或带有指定标签的商人，不会前往购买。
   
   可以使用国家/地区（如"蒙德"、"璃月"）或其他标签(如商人信息总览中的标签)
   
6. **无视购买记录强制购买**：开启后会忽略购买记录，重新购买所有商品
7. **调试模式**：开启后显示详细执行日志

### 购买记录系统说明
脚本会自动记录购买时间，避免重复购买：
1. **每天刷新食材** - 每天凌晨4点刷新
2. **3天刷新食材** - 每3天刷新一次
3. **每周刷新食材** - 每周固定週一购买

购买记录保存在：`record/你填的账号名/records.json`
- 下次执行时只购买已刷新商品
- 可通过"无视购买记录强制购买"选项重置


## 📋 商人与商品支持表

### 如何查看支持的商品？
- **查看本文件下方表格**：包含所有支持的商人与商品
- **查看`assets/data/foods.json`**：所有商品的中文名称

### 商人信息总览
| 所在地 | 商人名 | 每天刷新商品 | 3天刷新商品 | 每周刷新商品 | 标签 |
|--------|--------|-------------|------------|-------------|------|
| 蒙德-清泉镇 | 神奇的霍普金斯 | 圣水 | - | - |  |
| 蒙德-蒙德城 | 布兰琪 | 盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦 | - | - | |
| 蒙德-蒙德城 | 莎拉 | - | - | 面粉、奶油、熏禽肉、黄油、火腿、糖、蟹黄、果酱、奶酪、培根、香肠 | - |
| 璃月-璃月港 | 东升 | 盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦、稻米、虾仁、豆腐、杏仁 | - | - |  |
| 璃月-璃月港 | 阿山婆 | 霄灯 | - | - |  |
| 璃月-璃月港 | 卯师父 | 鱼肉、螃蟹 | 胡萝卜、松茸、绝云椒椒 | 面粉、糖、香肠、火腿 |  |
| 璃月-璃月港 | 老孙 | 鱼肉、螃蟹、虾仁 | - | - |  |
| 璃月-璃月港 | 老高 | 鱼肉、鱼肉2 | - | - |  |
| 璃月-璃月港 | 阿桂 | - | 清心、琉璃袋 | - | |
| 璃月-望舒客栈 | 菲尔戈黛特 | - | 松茸、琉璃袋 | 黄油、香肠 |  |
| 璃月-遗珑埠 | 丰泰 | - | 沉玉仙茗、琉璃袋、绝云椒椒 | 蟹黄 |  |
| 璃月-遗珑埠 | 连芳 | - | 沉玉仙茗 | - |  |
| 稻妻-离岛 | 小畑 | 螃蟹、鱼肉、虾仁 | - | - |  |
| 稻妻-稻妻城 | 葵 | 洋葱、牛奶、卷心菜、土豆、小麦、稻米、虾仁、豆腐、盐、胡椒、番茄 | - | - |  |
| 稻妻-稻妻城 | 志村勘兵卫 | 鱼肉、螃蟹 | 堇瓜 | - |  |
| 稻妻-海祇岛 | 清子 | - | - | 牛奶、番茄、土豆、小麦、豆腐 |  |
| 须弥-须弥城 | 朱特 | - | 帕蒂沙兰 | - |  |
| 须弥-奥摩斯港 | 布特罗斯 | 鱼肉、螃蟹、虾仁 | - | - |  |
| 须弥-须弥城 | 珀姆 | 鱼肉、螃蟹、虾仁 | - | - |  |
| 须弥-须弥城 | 哈马维 | 洋葱、牛奶、卷心菜、土豆、小麦、稻米、虾仁、豆腐、盐、胡椒、番茄 | - | - |  |
| 须弥-须弥城 | 兰巴德 | 鱼肉、螃蟹 | - | - | 独立地图 |
| 须弥-须弥城 | 恩忒卡 | 咖啡豆 | - | - | 独立地图 |
| 须弥-阿如村 | 阿扎莱 | 鱼肉、兽肉、秃秃豆 | - | - | 黑心商人 |
| 须弥-奥摩斯港 | 巴巴克 | - | 清心、琉璃袋 | - |  |
| 枫丹-枫丹廷 | 布希柯 | 枫达、洋葱、牛奶、卷心菜、土豆、小麦、秃秃豆、杏仁、发酵果实汁、盐、胡椒、番茄 | - | - |  |
| 枫丹-枫丹廷 | 阿鲁埃 | 枫达、咖啡豆 | - | - |  |
| 枫丹-白淞镇 | 安特曼 | 鱼肉、螃蟹、虾仁 | 海露花、汐藻 | - |  |
| 枫丹-锈舵酒馆 | 皮托 | 牛奶 | - | 培根、火腿、香肠、奶酪 | 黑心商人 |
| 纳塔-圣火竞技场 | 钦特利 | - | 青蜜莓、苦种 | - |  |
| 纳塔-圣火竞技场 | 夏安卡 | - | - | 面粉、奶油、黄油、火腿、糖、蟹黄、果酱、奶酪、培根、香肠 |  |
| 纳塔-圣火竞技场 | 布纳马 | 盐、胡椒、小麦、洋葱、牛奶、番茄、卷心菜、土豆、秃秃豆 | - | - |  |
| 挪德卡莱-那夏镇 | 采若 | 盐、胡椒、洋葱、牛奶、番茄、卷心菜、土豆、小麦、黑麦 | - | - |  |
| 挪德卡莱-皮拉米达城 | 科菲策 | 牛奶、咖啡豆 | 微光角菌、琉鳞石 | - | 黑心商人 |

 - 独立地图：指需要进入独立空间的特殊地图，这些地图部份路径无法使用地图追踪功能
 - 黑心商人：指没有折扣的商人，价格较贵的商人

### **标签系统尚未完全添加，欢迎补充标签**

## 🔧 添加新商品

### 1. 添加商品图片
1. 截图商品图标，尺寸建议 90×90 像素
2. 保存为 PNG 格式，放在 `assets/images/` 目录下
3. 文件名建议使用英文或拼音，如：`new_food.png`

### 2. 添加商品数据
在 `assets/data/foods.json` 中添加：

```json
"new_food": {
  "id": "new_food",
  "name": "新商品",
  "file": "assets/images/new_food.png"
}
```

### 3. 添加到商人
在 `assets/data/npcs.json` 中找到对应商人，添加到相应的商品列表中：

```json
"_1d_foods": ["新商品"]  // 每天刷新商品
"_3d_foods": ["新商品"]  // 3天刷新商品
"_7d_foods": ["新商品"]  // 每周刷新商品
```

### 4. 更新商人与商品支持表
将新商品添加到本文件的商人与商品支持表中，方便其他用户查看。

## 🆕 添加新商人

### 1. 录制路径
1. 使用路径录制工具录制前往商人的路径
2. 保存为 JSON 文件，命名格式：`地区-位置-商人名.json`
3. 放在 `assets/path/` 目录下

### 2. 添加商人数据
在 `assets/data/npcs.json` 中添加：

```json
"new_npc": {
  "name": "新商人名",
  "enable": true,
  "page": 2,              // 商店总页数
  "time": "any",          // any/day/night
  "path": "assets/path/地区-位置-新商人名.json",
  "_1d_foods": ["商品1", "商品2"],    // 每天刷新
  "_3d_foods": ["商品3"],             // 3天刷新
  "_7d_foods": ["商品4"],              // 每周刷新
  "tags": ["地区", "黑心商人"]    // 商人标签
}
```

### 3. 参数说明
- `page`: 商店的总页数
- `time`: 商人出现时间
  - `any`: 全天出现
  - `day`: 
  - `night`:
- `path`: 路径文件位置

### 4. 更新商人与商品支持表
将新商人添加到本文件的商人与商品支持表中。

## ❓ 常见问题

### Q: 脚本不购买任何商品？
A: 检查：
1. 是否在设置中填写了要购买的商品
2. 商品名称是否正确（参考上方表格）
3. 游戏分辨率是否为 1920×1080
4. 角色是否在单人模式
5. 是否有购买记录导致商品未刷新

### Q: 如何知道支持哪些商品名称？
A: 查看：
1. 本文件中的"商人与商品支持表"
2. `assets/data/foods.json` 文件中的 `name` 字段
3. 运行脚本时的日志输出会显示"用户启用了以下食材"

### Q: 为什么跳过某些商人？
A: 可能原因：
1. 该商人没有你要购买的商品
2. 商人在禁用列表中
3. 购买记录显示商品还未到刷新时间

### Q: 如何重置购买记录？
A: 有几种方法：
1. 启用"无视购买记录强制购买"选项
2. 删除 `record/你的账号名/records.json` 文件
3. 等待商品自然刷新

### Q: 每天什么时候刷新？
A: 游戏内的刷新时间是**每天凌晨4点**。脚本会考虑这个时间点：
- 如果当前时间在4点前，视为前一天
- 购买记录基于4点刷新时间计算

## 🤝 贡献指南

欢迎提交新的商人和商品配置！

1. **提交新的商人**：包含路径文件和商人数据
2. **提交新的商品**：包含图片和商品数据
3. **更新文档**：记得更新本README中的商人信息表
4. **标签补充**：欢迎为现有商人添加合适的标签
5. **问题反馈**：提供详细的重现步骤和日志

---

> 注意：本脚本仅供学习与研究使用，请遵守游戏使用条款。
``